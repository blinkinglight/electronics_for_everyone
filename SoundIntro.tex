\chapter{An Introduction to Sound Production}

In Chapter~\ref{chapOscillators}, we learned to make an oscillator circuit.
Oscillations affect a lot of areas of electronics, but the one that is most directly usable (well, besides making blinky lights) is in making sounds.

\section{How Sound is Produced by Speakers}

As we mentioned in Chapter~\ref{chapOscillators}, sound is the result of vibrations (i.e., oscillating motions) in the air.
These vibrations are produced in electronics with a speaker when the speaker oscillates back and forth.
The speaker oscillates back and forth because it is connected to a magnet and a coil.
When the electricity in the coil oscillates between more positive and more negative charges, the magnet is attracted and repelled from the coil, moving the speaker back and forth.

The frequency of this oscillation will determine the pitch of the sound (i.e., how high or low the sound is).
If the frequency is higher (shorter periods), then the pitch is higher.
If the frequency is lower (longer periods), then the pitch is lower.

Now, compared to the blinking lights we worked with in Chapter~\ref{chapOscillators}, sounds that you can hear are all of a much higher frequency.
The bottom end of the hearable audio is about $20\myhz$---that is, 20 cycles per second.
The top end is about $20\mykhz$ (i.e., $20,000\myhz$).
These values vary by individual, but this is a pretty good guide for most people.
If we tried to blink an LED that fast, we just would not be able to see it---it would just look like a dimmer-than-normal light.

\section{Graphing Electricity}

Now, when we deal with circuits that are oscillating quickly, we need to have a way to visualize what is happening.
With circuits that have one or two states, we don't need to visualize much---we just need to calculate what the values are.
However, with circuits that are continually oscillating (such as sound circuits), it is helpful to be able to graph what the voltages are at different points in time.

There are several ways to graph electricity.
One of the most common ways is to plot \emph{time} on the $x$-axis and \emph{voltage} on the $y$-axis.  
This gives a visible representation of how the voltage is varying within the circuit.
Now, because each point in a circuit has a different voltage, you have to specify \emph{which point} on the circuit you are graphing.
For instance, if you take the circuit in Figure~\ref{figSimple555Oscillator}, the two places which you might want to graph the voltages are either (a) right before the capacitor, or (b) right after the output pin.

These will give \emph{very} different graphs, but both of them are instructive.  The graph of (a) will show you what the input side of the circuit looks like, and the graph of (b) will show you what the output side of the circuit looks like.

\begin{figure}
\caption{A Graph of the Capacitor Voltage of Figure~\ref{figSimple555Oscillator}}
\label{fig555CapacitorVoltage}
\fixme{need graph}
\end{figure}

\begin{figure}
\caption{A Graph of the Output Voltage of Figure~\ref{figSimple555Oscillator}}
\label{fig555OutputVoltage}
\fixme{need graph}
\end{figure}

Notice that Figure~\ref{fig555CapacitorVoltage} is fairly smooth.
This is because capacitor charging causes the voltage to change smoothly over time.
It charges up until it reaches $\frac{2}{3}$ supply voltage and then discharges down to $\frac{1}{3}$ supply voltage.
It does this over and over again as you can see on the graph.

The output, however, is either \emph{on} or \emph{off}.  
Therefore, Figure~\ref{fig555OutputVoltage} shows a very jagged graph.
This is known as a \glossterm{square wave}, because it is basically rectangular.
The voltage just goes from zero to the target voltage almost instantly and then after it stays there a bit the voltage goes back down again just as instantaneously as it rose.

In addition to graphing voltage, we can also graph current in the same way, though it is harder to measure.
Because voltage can be measured with simple probes and measuring current requires replacing a wire, most of the time people just focus on voltage measurements.
Special devices known as \glossterm{oscilloscopes} can be used to measure voltage changes over time.
Figures~\ref{fig555CapacitorVoltage} and~\ref{fig555OutputVoltage} were made by hooking up an oscilloscope to the circuit while it was in operation.
Oscilloscopes used to cost thousands of dollars, but now you can pick up a small handheld oscilloscope for under \$50.

Usage of an oscilloscope is outside the scope of this book, but the basics are simple enough.
An oscilloscope usually has an active probe and a ground probe.
You hook up the ground probe to the ground on your circuit, and you hook up the active probe to the point in the circuit that you want to measure.
Then, you look at the screen, and it will graph for you what the past and current voltage is at that point.
Most oscilloscopes have all sorts of adjustments, such as how wide of a voltage range you want to measure, and how long of a time window you want to show on the screen.
In any case oscilloscopes provide graphical views of oscillating voltages.

\section{Outputting a Tone to Headphones}

In this section, we are going to modify the circuit in Figure~\ref{figSimple555Oscillator} to add in a headphone output.
Figure~\ref{figSimpleToneGenerator} shows the final circuit, and Figure~\ref{figSimpleToneGeneratorBreadboard} shows how to build it.
This circuit has several changes to our original circuit that we will discuss in this section.

\simplepdffigure{Schematic for a Simple 555-based Tone Generator}{SimpleToneGenerator}{0.25}

\simplepdffigure{Breadboard Layout for 555-based Tone Generator}{SimpleToneGeneratorBreadboard}{1}

The first changes to this circuit are to the RC time circuit.
Because we want the circuit to be in audio range, we are making a much higher frequency (i.e., a shorter period).
To do this, we swapped out the electrolytic capacitor for a ceramic disk capacitor of $10\mynf$.  
Then, we dropped the resistors down to $10\mykohm$.
This will make a tone with a period of $0.003\mysec$.
Taking the reciprocal gives us the frequency---$1\mykhz$.
This is well within hearing range for most people.
You can adjust the resistors and capacitors how you wish for different tone frequencies.
We are merely using the equations from Chapter~\ref{chapOscillators} to determine the period and frequency.

The strange change is in the output circuit.
When we were blinking the LED, we just used a medium-sized resistor to limit output current.
Here, however, we are using a combination of a capacitor and a resistor.
This \emph{looks like} an RC time circuit---and it would be, if it had a constant voltage going to it.
Instead, in this circuit, the capacitor is used to remove the \glossterm{DC bias voltage} (which we will discuss shortly), and the resistor is used to limit current down to what the headphones/speaker can handle.

\section{DC Bias Voltage and Its Removal}

As mentioned earlier, the speaker is driven by changing voltages in a coil, which alters the attraction of the coil to a magnet.
These variations in attraction and repulsion moves the coil back and forth, which moves the speaker cone, which vibrates the air, which vibrates your eardrum, which you hear.

If you look at the graph in Figure~\ref{fig555OutputVoltage}, notice that while the voltage goes up to a positive voltage, the \emph{lowest} that it ever goes is zero.
Speakers, however, are made to utilize \emph{both positive and negative voltages}.
That is, they expect the current to flow in both directions.

Speakers expect the oscillating current to go back and forth each direction about evenly.
If the amount of time the current spends in one direction is consistently greater than the other direction, this is known as \glossterm{DC Bias Voltage}.
This means that, rather than the audio signal being centered on zero-voltage, it is centered somewhere else.

This can lead to a variety of problems.
At minimum, it reduces the output range of the speaker.
Since speakers are made to move across the full spectrum of voltages in either direction, a DC bias voltage will cause the speaker to only use part of its range.
More importantly, however, is that the speaker coils are made to shift back-and-forth across zero volts, and spending too much time with the current flowing in one direction can cause the coil to heat up and burn the speaker out.

Because of this, we want a way to reduce or eliminate bias voltage in the speaker output.
The standard way of doing this is by inserting a capacitor between the biased output voltage and the speaker.
Using a capacitor in this way is known as a \glossterm{coupling capacitor}, because it couples together a DC-biased source with an output that expects a true AC signal.

To understand why this works, imagine how a capacitor operates.
While the capacitor is charging and discharging, charge is moving through both sides of the capacitor.  
Remember, even though the pathway is blocked, when a positive charge accumulates on one side, it pulls electrons into the other side.
Since the electrons are moving out of the circuit on the other side, the other side is getting more positive.
Thus, when the charge on the capacitor is changing, current is indeed flowing.

Now, when the voltage stays the same, no electrons move, no matter what the voltage is.
Therefore, even though you have a positive voltage on one side, if the voltage is not changing, no current is flowing.
Therefore, on an unchanging current, the voltage on the other side of the capacitor will be zero.

So, as you can see, the capacitor only allows through \emph{changes} in voltage, not the absolute voltage.
In other words, a capacitor will \emph{block} DC bias voltages, but allow AC oscillations to pass right through.
Thus, by adding a capacitor in series, we can eliminate DC bias voltage for the most part.
Different capacitor values, however, are optimized for transmitting different frequencies.
For audio applications, a capacitor somewhere between $10\mynf$ and $10\myuf$ should be used.

The R3 resistor is there to limit the output signal to the headphones.
Headphones and speakers are all a little strange---there is very little standardization.
Different headphones have different resistances in the speakers, and different tolerances for how much wattage can be put through them.
However, for headphones, you can be fairly safe by estimating that the headphones will act as $16\myohm$ resistors, and that they can consume a maximum of $20\mymwatt$.

The output of the 555 timer is $1.7\myvolt$ less than my supply voltage.
So, for a $5\myvolt$ source, the output will be $3.2\myvolt$. 
We can use the formula $P = \frac{V^2}{R}$ to determine how many watts this will supply.
If the speaker is $16\myohm$, then the power used by the headphone without the extra resistor will be $\frac{3.2^2}{16} = 0.64\mywatt = 640\mymwatt$.
Therefore, the R3 resistor pulls out some of that power.

With the resistor, the combined power usage of the resistor and the headphone speaker is $166\myohm$.
Therefore, the power here is $\frac{3.2^2}{166} = 0.06\mywatt = 60\mymwatt$.
This looks like it is still over our range, but remember that this is the \emph{combined} power of both the resistor and our speaker.
The speaker is only supplying about $\frac{1}{10}$ of the resistance, so it is only using up $\frac{1}{10}$ of the power, or $6\mymwatt$, which is well under our maximum.

\section{Sound Control}

Now, as I mentioned, all headphones are different, and, with the exception of \emph{having} a coupling capacitor, they all have different ranges and need different amounts of power.
Usually this is accommodated by having a volume control.

There are two basic ways to do a volume control.
The first is with a \glossterm{variable resistor}.
On a variable resistor, you usually turn a knob and the resistance changes.
Variable resistors go by different names---variable resistor, adjustable resistor, rheostat, and trimming resistors.
Trimming resistors are the easiest to use for this, but probably the hardest to find.
To use a variable resistor, you would need to find one with the right range of values, and then simply replace the output resistor R3 with your variable resistor.

A more common type of component is a potentiometer.
A potentiometer is basically a variable voltage divider.
It has three leads---input, ground, and output.
When you turn the knob, it adjusts the relative resistance of each side of the voltage divider to vary what is coming out of the output.

You can use a potentiometer for a volume control---take the output from the coupling capacitor to the positive input of the potentiometer, run the ground of the potentiometer to the ground rail, and put the output to the speaker.
You can also, however, just use half of the potentiometer as a variable resistor.
Most potentiometers are made using what is essentially two variable resistors.
By using the positive pin and the output pin alone (leaving the ground pin unconnected), the potentiometer becomes a simple variable resistor.
Potentiometers vary widely in how much resistance they offer, so if we were to add one as a volume control we would need to make sure its resistance range approximately matches what is needed (around $150\myohm$).

% FIXME - need to show symbol for potentiometer
% FIXME - mention peak-to-peak voltage (since we are only on half of the voltage)
% FIXME - talk about how speakers actually care about the average voltage, not the final
% FIXME - need to add in the final build as well as the oscilloscope stuff

\reviewsection

In this chapter, we learned:

\begin{enumerate}
\item Sound is the result of oscillations in the air that is picked up by your eardrums.
\item Sound can be generated by an oscillating speaker cone vibrating against the air.
\item The oscillations in a speaker cone are made by a magnet being drawn and repelled to another magnet by oscillations in electrical power.
\item Sound generally has higher frequencies (i.e., shorter periods) than what we use for flashing lights.
\item Hearable sound frequencies range from $20\myhz$ to $20\mykhz$.
\item On circuits where voltage and/or current change with time, it is often helpful to plot their changes at specific points on a graph to help visualize what is happening.
\item The output of the 555 timer is known as a square wave because it has steep changes in voltage at specific points, making a rectangular-shaped graph.
\item An oscilloscope can be used to measure and record these types of graphs.
\item Voltages that oscillate quickly with time are known as alternating current, or AC voltages. %%% FIXME - make sure this is in the chapter
\item Oscillating voltages that do not spend roughly equal amounts of time on either side of zero volts are said to have a DC bias voltage.
\item The DC bias voltage is how much voltage you would have to subtract from the voltage in order for the voltage to be centered on zero volts.  %%% FIXME - make sure this is in the chapter  %%% FIXME - should also probably have something about measuring the AC voltage
\item Most circuits have DC bias voltages, but most output devices (such as speakers) need the DC bias voltage removed and only use the AC component of the signal.
\item DC bias voltage can be removed by placing a coupling capacitor in series with the output signal.  The capacitor will only transmit voltage \emph{changes}, thus removing the DC bias voltage.
\item Speakers and headphones vary considerably in their properties.
\item The most important considerations are how many ohms of resistance they have and how many watts are needed to drive the sound.
\item For headphones, a good starting assumption is that the speaker is $16\myohm$ and needs between $5--20\mymwatt$ of output.
\item If your output signal is larger than this, be sure to add a resistor in series to consume some of the output signal's power.
\item The output resistor can be replaced with a variable resistor or a potentiometer to have a user-controlled output setting, also known as a volume control.
\item A potentiometer is a variable voltage divider.  However, by using only the positive and output terminals, it can be used as a variable resistor instead.
\end{enumerate}

\applysection

\begin{enumerate}
\item Why is the input voltage signal to the 555 timer smooth, but the output is jagged?
\item Will increasing the resistance of R1 and R2 make the pitch higher or lower?
\item Can you think of a way to modify the circuit so that the pitch of the sound can be adjusted while the circuit is on? 
\item Given the circuit in Figure~\ref{figSimpleToneGenerator}, what power would be delivered to your headphones if you were using an $8\myohm$ speaker instead of the $16\myohm$ speaker?  What about a $100\myohm$ speaker?
\item The frequency of the A note above middle-C on the piano is $440\myhz$.  Design a modification to this circuit that will yield a middle-C.
\item The output of the 555 is $1.7\myvolt$ less than the power supply used.  What is the effect on the wattage to the headphones if we change the power supply to be a $9\myvolt$ power supply?
\end{enumerate}
